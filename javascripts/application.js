// Generated by CoffeeScript 1.3.3
(function() {
  var duration, homeLinks, initializePosition, returnHome, sizeHome, _moveToElement, _positionStageOn, _setStageOriginTo;

  duration = 2000;

  $(function() {
    sizeHome();
    initializePosition();
    homeLinks();
    return returnHome();
  });

  sizeHome = function() {
    $("#home").outerWidth($(window).width());
    return $("#home").outerHeight($(window).height());
  };

  initializePosition = function() {
    return _setStageOriginTo($("#home"));
  };

  homeLinks = function() {
    return $("body").on("click", "#home ul a", function(e) {
      var target;
      e.preventDefault();
      target = $("#" + ($(e.target).data("target")));
      _moveToElement(target);
      return $("#home .return-home").show();
    });
  };

  returnHome = function() {
    return $("body").on("click", ".return-home", function(e) {
      console.log('hoooome');
      $("#home .return-home").hide();
      return _moveToElement($("#home"));
    });
  };

  _moveToElement = function(el) {
    _setStageOriginTo(el);
    $("#stage").addClass("zoomed-out");
    _positionStageOn(el);
    setTimeout(function() {
      return $("#stage").removeClass("zoomed-out");
    }, duration / 2);
    if (el.attr("id") === "home") {
      return $("#fixed-return-home").fadeOut(duration);
    } else {
      return setTimeout(function() {
        return $("#fixed-return-home").fadeIn(duration);
      }, duration + 500);
    }
  };

  _setStageOriginTo = function(el) {
    var elCoords;
    elCoords = $(el).centerCoords();
    return $("#stage").transformOrigin("" + elCoords.left + " " + elCoords.top);
  };

  _positionStageOn = function(el) {
    var left, pos, top;
    pos = $(el).position();
    top = pos.top * -1 + ($(window).height() - el.outerHeight()) / 2;
    left = pos.left * -1 + ($(window).width() - el.outerWidth()) / 2;
    return $("#stage").css({
      top: top,
      left: left
    });
  };

  jQuery.fn.centerCoords = function(percent) {
    var left, pos, suffix, top;
    if (percent == null) {
      percent = false;
    }
    pos = $(this).position();
    top = $(this).outerHeight() / 2 + pos.top;
    left = $(this).outerWidth() / 2 + pos.left;
    suffix = "px";
    if (percent) {
      top = (top * 100) / $("#stage").height();
      left = (left * 100) / $("#stage").width();
      suffix = "%";
    }
    return {
      top: top + suffix,
      left: left + suffix
    };
  };

  jQuery.fn.transform = function(args) {
    return $(this).css({
      "-webkit-transform": args,
      "-moz-transform": args,
      "transform": args
    });
  };

  jQuery.fn.transformOrigin = function(args) {
    return $(this).css({
      "-webkit-transform-origin": args,
      "-moz-transform-origin": args,
      "-ms-transform-origin": args,
      "-o-transform-origin": args,
      "transform-origin": args
    });
  };

}).call(this);
